这里开始算法了

首先就是最简单的 base64

```
window.btoa('123456'); //加密去base64
window.atob('MTIzNDU2'); //加密去base64
```

在nodejs中我们首先安装

`npm install crypto-js`

```js
var a = "李佳佳"

//加密
var b = Buffer.from(a, "utf-8").toString("base64");
console.log(b)

//解密
var c = Buffer.from(b, "base64").toString("utf-8");
console.log(c)
```

# base64实战

`owssso.szse.cn/sso/login?service=https://www.szse.cn/application/passCenter/pass/&locale=zh`

打开没有debugger 所以直接分析

![image-20260110171858612](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110171858612.png)

找到登入的包 看看分析内容

![image-20260110172001587](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110172001587.png)

可以发现 很简单就是base64加密

搜索64(base64 或者其他关键字)可以发现有一个 `login.js`

![image-20260110172301766](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110172301766.png)

可以发现了加密地点

# 实战2

`https://content-static.cctvnews.cctv.com/snow-book/index.html?item_id=10469461964760322978`

![image-20260110172918996](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110172918996.png)

我们分析 这里如果是一个`json`格式 一定需要转化为字符串 所以我们可以hook一下 `JSON.parse`

```js
(function() {
	var parse_ = JSON.parse;
	JSON.parse = function(a){
		console.log("断住了");
		debugger;
		return parse_(a)
	}})()
```

写入油猴脚本中

可以发现 多次跳过后 出现明文了

![image-20260110173813787](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110173813787.png)

现在开始跟栈

![image-20260110173842123](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110173842123.png)

![image-20260110173945612](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110173945612.png)

在这里下断点 然后取消油猴 直接开始

![image-20260110174052459](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110174052459.png)

所以我们知道了 返回的内容 通过base64 decode 即可获得明文 实现爬取

# 实战3

`https://www.virustotal.com/gui/home/search`

![image-20260110175315708](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110175315708.png)

分析这个头

![image-20260110175432219](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260110175432219.png)

直接看看这个方法是什么

```js
            computeAntiAbuseHeader() {
                let e = Date.now() / 1e3;
                return btoa(`${( () => {
                    let e = (1 + Math.random() % 5e4) * 1e10;
                    return e < 50 ? "-1" : e.toFixed(0)
                }
                )()}-ZG9udCBiZSBldmls-${e}`)
            }
```

这就是生成的关键函数

这就是结束了