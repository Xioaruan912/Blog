# 对称加密

加密过程如图所示

![image-20260114092402542](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260114092402542.png)

1. 加密解密的 `KEY` 是一个
2. 对称加密算法 是公开的
3. 主要有 AES 和 DES 但是DES因为位数问题 逐渐被舍弃

![image-20260114092748967](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260114092748967.png)

`KEY`：加密和解密的密钥 主要安全核心内容

`iv`： 初始化向量 主要对 分组密码的加密 增强密码强度的参数 固定长度的随机数（伪随机） 一般与明文一起输入给加密函数，一个密钥 加密不同明文 都可以产生不同密文 增加随机性

也就是 一个 `KEY` 但是不同的 `iv` 即使对于一个明文 加密结果也是不同的

## 算法的模式

下面模式是用的最多的

`ECB模式`：数据分为固定长度的数据块，每个数据块独立加密 ，加密后的长度和加密前的数据长度一样，容易收到重放攻击

`CBC模式`：前一个加密后的密文和此次加密的明文 `异或`  然后进行假面 无法并行处理数据块

# Padding

`padding`：使用AES或者DES的时候 需要填充内容满足加密数据块的大小

1. `填充0算法`：全部填充0
2. `PKCS5/7算法`：末尾填充内容为位数
3. `ISO 10126算法`：填充随机 最后一个字节表示填充个数
4. `ANSI X.923算法`：填充0 最后一个为个数

一般使用`PKCS7`

# 代码实现

```js
const Crypto = require('crypto-js')

var key = Crypto.enc.Utf8.parse("123123")
var iv = Crypto.enc.Utf8.parse("454545")
var text = Crypto.enc.Utf8.parse("加密内容")

//要改为AES 里面修改即可
enctext = Crypto.DES.encrypt(text, key, {
    iv: iv,
    mode: Crypto.mode.CBC,
    padding: Crypto.pad.Pkcs7
}).toString()


console.log(enctext)
```

