https://github.com/l429609201/misaka_danmu_server

```
services:
  mysql:
    # 国内更稳：docker.m.daocloud.io/library/mysql:8.0
    image: mysql:8.0
    container_name: danmu-mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: "11111"
      MYSQL_DATABASE: "danmuapi"
      MYSQL_USER: "danmuapi"
      MYSQL_PASSWORD: "11111"
      TZ: "Asia/Shanghai"
    command:
      - "--default-authentication-plugin=mysql_native_password"
      - "--character-set-server=utf8mb4"
      - "--collation-server=utf8mb4_unicode_ci"
      - "--expire_logs_days=3"
      - "--binlog_expire_logs_seconds=259200"
    volumes:
      - ./mysql-data:/var/lib/mysql
    healthcheck:
      # 用 root 的环境变量做 ping，避免密码不一致
      test: ["CMD-SHELL","mysqladmin ping -h 127.0.0.1 -uroot -p$${MYSQL_ROOT_PASSWORD} --silent"]
      interval: 5s
      timeout: 5s
      retries: 30
      start_period: 60s
    networks:
      - misaka-net

  danmu-app:
    # 国内更稳：docker.m.daocloud.io/l429609201/misaka_danmu_server:latest
    image: l429609201/misaka_danmu_server:latest
    container_name: misaka-danmu-server
    restart: unless-stopped
    depends_on:
      mysql:
        condition: service_healthy
    environment:
      - PUID=1000
      - PGID=1000
      - UMASK=0022
      - DANMUAPI_DATABASE__TYPE=mysql
      - DANMUAPI_DATABASE__HOST=mysql
      - DANMUAPI_DATABASE__PORT=3306
      - DANMUAPI_DATABASE__NAME=danmuapi
      - DANMUAPI_DATABASE__USER=danmuapi
      - DANMUAPI_DATABASE__PASSWORD=11111
      - DANMUAPI_ADMIN__INITIAL_USER=admin
    volumes:
      - ./config:/app/config
    ports:
      - "7768:7768"
    networks:
      - misaka-net

networks:
  misaka-net:
    driver: bridge

```

# 玩法

![image-20250821112012888](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20250821112012888.png)

添加token 设置抓取源

![image-20250821112029736](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20250821112029736.png)

![image-20250821112043305](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20250821112043305.png)

就可以开始了