学习汇编语言的目的 不是通过汇编语言去 开发 而是实现 逆向过程

具有下面两个风格

`Intel风格`

![image-20260122094810256](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260122094810256.png)

```
 指令注记符 目标操作  源操作
```

主要用于 win和 英特尔公司的产品

`AT&A风格`

![image-20260122094828467](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260122094828467.png)

```
指令注记符 源操作 目标操作
```

![image-20260122094923595](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260122094923595.png)

操作数和源操作数 可以是一个地址

`dword ptr` 表示一个指针 说明 这是指向` [ebx] `中地址的 指针

# 数学运算指令

## 加法`add`

```
add eax,5
```

转成高级语言就是

```
eax = eax + 5
eax += 5
```

除了加立即数 还可以加 寄存器

```
add eax,ebx
```

把`ebx`的值 加到 `eax`中 高级语言如下

```
eax = eax + ebx
```

## 减法`sub`

```
sub esp,1
```

多用于 堆栈处理

## 乘法 `mul`

```
mul ebx
```

注意 这里默认 通过 `eax` 存放另一个 操作数

```
eax = eax * ebx
```

如果乘法 前面加上 `i` 说明是有符号的乘法

```
imul ebx,doword ptr[ebx]
```

## 除法 `div`

```
div ebx
```

默认另一个操作数在 `eax`中 并且 `eax`存放被除数 余数存放在 `edx`中 一样 有 `i`则是有符号除法

# 逻辑运算

主要是对`位`运算

![image-20260122100332602](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260122100332602.png)

# 赋值

`mov`是最基本的

```
movsb  byte
movsw  word
movsd  double word
movsq  四字
```

默认通过 ESI 寄存器 作为源  EDI 寄存器作为目的

# 比较

`cmp` 用 `sub` 并且设置标志寄存器 不保存结果

`test` 用 `and`操作 并且设置标志寄存器 不保存结果  多和跳转配合

# 跳转

无条件 `jmp`  可以配合 相对和绝对地址 通过 后面的值 +` EIP`寄存器的值

![image-20260122100719493](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260122100719493.png)

# 标志寄存器 eflag

![image-20260122101047748](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260122101047748.png)

计算过程比较关键的是

`ZF`：结果是否为0 如果是 则设置为1 否则0

`OF`：有符号运算 是否溢出

`CF`：无符号运算 是否进位

`PD`：计算结果奇偶

`SF`：符号标志位 表示正负

# 堆栈

这里的堆栈 其实就是栈 是进程 4GB 空间里面的一篇区域 遵循先进后出的过程 是函数调用的很重要的地方 从高地址 向低地址 增长的

通过 `ESP` 指向栈顶

`push`：压入值 并且自动 `ESP -4` 默认一个单位是`4byte`

`pop`：推出 并且 `ESP+4`

我们可以通过 数学运算 手动计算修改 `ESP`的值

# 函数调用

`call`：`call  xxxx` 和 `jmp` 类型 无条件执行 可以是绝对和相对地址

`ret`：返回地址存入堆栈中

`call` 可以简单为 

```
push EIP  //返回地址 call的后面一条地址
jmp xxxx
```

`ret` 可以简单为

```
pop EIP
jmp EIP
```

# 系统调用和中断返回

![image-20260122102023271](https://raw.githubusercontent.com/Xioaruan912/pic/main/image-20260122102023271.png)